<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">

  <title>Frontend Mentor | Results summary component</title>
  <link rel="stylesheet" href="styles.css">

</head>

<body>
  <main>
    <section class="result">
      <h1>Your Result</h1>
      <article class="circle">
        <h1 id="resultScore"></h1>
        <h4>of 100</h4>
      </article>

      <h1 class="hidden" id="comment-1">Great</h1>
      <p class="hidden" id="comment-2">You scored higher than 65% of the people who have taken these tests.</p>
    </section>
    <section class="summary">
      <h1>Summary</h1>
      <article class="group" id="group">
        <!--<div class="reaction">
          <img src="assets/images/icon-reaction.svg" alt="reaction">
          <h1>Reaction</h1>
          <p><span>80</span> / 100</p>
        </div>
        <div class="memory">
          <img src="assets/images/icon-memory.svg" alt="memory">
          <h1>Memory</h1>

          <p><span>92</span> / 100</p>
        </div>
        <div class="verbal">
          <img src="assets/images/icon-verbal.svg" alt="verbal">
          <h1>Verbal</h1>
          <p><span>61</span> / 100</p>
        </div>
        <div class="visual">
          <img src="assets/images/icon-visual.svg" alt="visual">
          <h1>Visual</h1>
          <p><span>72</span> / 100</p>
        </div>-->
      </article>
      <button>
        Continue
      </button>
    </section>
  </main>
  <div class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.
    Coded by <a href="https://www.frontendmentor.io/profile/bderrickmatthew" target="_blank">bderrickmatthew</a>.
  </div>

  <!---Custom JS Script---->
  <script defer>
    fetch('data.json')
      .then(function (response) {
        return response.json();
      })
      .then(function (data) {
        appendData(data);
      })
      .catch(function (err) {
        console.log('error: ' + err);
      });
    function appendData(data) {
      var mainContainer = document.getElementById("group");
      const resultScore = document.querySelector("#resultScore");
      let result = '';
      let scores = 0;
      for (let i = 0; i < data.length; i++) {
        result += `
    <div class=${data[i].myClass}>
      <img src=${data[i].icon} alt="icon" >
      <h1>${data[i].category}</h1>
      <p><span class="score">${data[i].score}</span> / 100</p>
    </div>
    `
        scores += data[i].score; //add up the score values
      }
      let totalResultScore = scores / data.length;
      mainContainer.innerHTML = result;
      resultScore.innerText = totalResultScore.toPrecision(2);

      function count() {
        resultScore.innerText = '0';
        var endValue = totalResultScore.toPrecision(2);
        var counter = 0;
        var myInterval = window.setInterval(() => {
          counter = parseInt(resultScore.innerText);
          newCount = counter + 1;
          resultScore.innerText = newCount;
          if (resultScore.innerText === endValue) {
            clearInterval(myInterval);
            showComments();
            shine();
          }
        }, 15);

      }
      count();

      function showComments() {
        let commentOne = document.getElementById('comment-1');
        let commentTwo = document.getElementById('comment-2');
        commentOne.classList.remove('hidden');
        commentTwo.classList.remove('hidden');
        commentOne.classList.add('visible');
        commentTwo.classList.add('visible');
      }

      function shine() {
        resultScore.classList.add('shine');
      }
    }
  </script>
</body>

</html>
